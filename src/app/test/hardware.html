<!DOCTYPE html>
<html>
<head>
    <title>Interactive Hardware Test</title>

    <script src="../../lib/js/jquery-1.10.2.min.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/hardware.js"></script>
    <script>
        // Hardware
        $('body').ready(function() {
            var buttons = [
                new yasp.Hardware({
                    cb: function(button) {
                        $('#button_red_state').text(button.state);
                    },
                    container: $('#button_red'),
                    type: yasp.HardwareType.PUSHBUTTON,
                    params: {
                        color: 'rgb(255, 0, 0)',
                        pushcolor: 'rgb(200, 0, 0)'
                    }
                }),
                new yasp.Hardware({
                    cb: function(button) {
                        $('#button_green_state').text(button.state);
                    },
                    container: $('#button_green'),
                    type: yasp.HardwareType.PUSHBUTTON,
                    params: {
                        color: 'rgb(0, 255, 0)',
                        pushcolor: 'rgb(0, 200, 0)'
                    }
                }),
                new yasp.Hardware({
                    cb: function(button) {
                        $('#button_blue_state').text(button.state);
                    },
                    container: $('#button_blue'),
                    type: yasp.HardwareType.PUSHBUTTON,
                    params: {
                        color: 'rgb(0, 0, 255)',
                        pushcolor: 'rgb(0, 0, 200)'
                    }
                })
            ];
            
            var leds = [
                new yasp.Hardware({
                    cb: function(led) {
                        $('#led_red_state').text(led.state);
                    },
                    container: $('#led_red'),
                    type: yasp.HardwareType.LED,
                    params: {
                        onColor: 'rgb(255, 0, 0)',
                        offColor: 'rgb(150,0,0)'
                    }
                }),
                new yasp.Hardware({
                    cb: function(led) {
                        $('#led_green_state').text(led.state);
                    },
                    container: $('#led_green'),
                    type: yasp.HardwareType.LED,
                    params: {
                        onColor: 'rgb(0, 255, 0)',
                        offColor: 'rgb(0,150,0)'
                    }
                })
            ];
            
            setInterval(function() {
                var states = yasp.HardwareType.LED.States;
                leds[0].receiveStateChange(leds[0].state == states.ON ? states.OFF : states.ON);
            }, 1000);
            
            var ledCounter = 255;
            var greenLed = function() {
                var states = yasp.HardwareType.LED.States;
                leds[1].receiveStateChange(leds[1].state == states.ON ? states.OFF : states.ON);
                
                ledCounter--;
                setTimeout(greenLed, ledCounter);
            };
            setTimeout(greenLed, ledCounter);
        });
    </script>
    <style>
        .pushbutton {
            width: 40px;
            height: 40px;
            margin: 8px;
        }
        .desc {
            width: 500px;
            float: right;
            height: 40px;
            margin-top: -35px;
        }
        
        .led {
            width: 30px;
            height: 30px;
            margin: 8px;
        }
        
        .group {
            width: 600px;
            height: inherit;
            margin-left: auto;
            margin-right: auto;
            border: 1px solid black;
            padding: 8px;
        }
    </style>
</head>
<body>
    <h1>PushButtons</h1>
    <div class="group">
        <div id="button_red" class="pushbutton"></div>
        <div id="button_red_state" class="desc"></div>
        
        <div id="button_green" class="pushbutton"></div>
        <div id="button_green_state" class="desc"></div>
        
        <div id="button_blue" class="pushbutton"></div>
        <div id="button_blue_state" class="desc"></div>
    </div>
    
    <h1>LED</h1>
    <div class="group">
        <div id="led_red" class="led"></div>
        <div id="led_red_state" class="desc"></div>

        <div id="led_green" class="led"></div>
        <div id="led_green_state" class="desc"></div>
    </div>
</body>
</html>